language: minimal

python:
    - '3.6'

compiler:
    - g++
   
cache:
    ccache: true
    pip: true

before_install:
  - sudo apt-get update
  - sudo apt-get -y install python3-pip
  - pip3 install setuptools --user
  - pip3 install python-coveralls --user
  - pip3 install https://storage.googleapis.com/tensorflow/linux/cpu/tensorflow-2.0.0-cp36-cp36m-manylinux2010_x86_64.whl --user
  - pip3 install torch==1.3.1+cpu torchvision==0.4.2+cpu -f https://download.pytorch.org/whl/torch_stable.html --user

install:
    - "pip3 install -e . -r requirements.txt --user"
    - df -h

script:
  - coverage run -m unittest discover

after_success:
  - codecov
  - coveralls